# 操作系统大作业——实现一个文件系统



本次大作业实现了一个简单的文件系统，使用的是基于Ext的文件系统进行模拟开发。其中主要的数据结构包括SuperBlock、Inode、Fcb以及FcbLink，使用模块化开发。

**其中本次实验要点包括：**

1. 存储：基于大文件实现，开辟100MB的大文件用于管理内存及数据。

2. 文件逻辑结构：索引顺序文件文件结构，顺序文件中的记录先分为组，为顺序文件建立一张索引表，在索引表里为每组中的第一个记录建立索引项，记录在文件中的位置由索引表和顺序来决定。(提升：二级索引)

3. 文件物理结构： 顺序存储，使用块来保存Block的数据并且块是连续的。

4. 管理：使用位图Bitmap来管理Inode节点以及数据块Block的使用情况，使用char来代表Bitmap的位, 由于内存需要对齐，就算使用bool也是需要占用8个字节

 

**已经实现的功能有：**

1. 多种指令接口：

ls 与 ls –l(显示目录文件与文件夹)、mkdir(创建目录)、open(创建文件)、rmdir(删除目录)、rm(删除文件)、write(写文件)、cat(读文件)、mv(重命名文件)、cd(切换目录)、help(帮助指令)、chmod(更改文件权限)、account(更改账号信息)、logout(登出)、exit (退出)。

2. 使用信号量实现了读写进程的互斥访问

 

**可以改进的地方：**

1. 写大文件

2. 给Inode节点增加二级索引，并且增加二级索引的操作



###### 最终成果预览

![文件系统预览](https://i.loli.net/2020/07/09/STyowZ7K9ihfq2O.jpg)

 

**心得：**

这次大作业模拟了Linux下的文件系统管理，花费了大量的时间，对于ext文件系统有了深刻的了解，ext主要是采用一种类似链表的管理模式来管理文件的信息链；用顺存储的模式来保存存储的块。同时，通过这次实验，我也知道了对于这种精细内存的管理，使用C要容易的多，C的指针管理能够做到精确到字节的管理，对于指定数据的访问只要知道一个偏移值及数据的大小就能够得到数据，非常的强大。在这次实验，对于文件管理的认识也进一步的提升了！

 

---

